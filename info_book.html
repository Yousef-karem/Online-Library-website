<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Css/nav.css">
    <link rel="stylesheet" href="Css/bookInfo.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" /> 
    
</head>
    <body>
        <div id="nav"></div>
    <div id="book-info">
        
    </div>
    <div id ="footer">
    </div>
    <script src="jss/navStudent.js"></script>
    <script>
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

      // Get book details from URL parameters
        const title = getUrlParameter("title");
        const description = getUrlParameter("description");
     // const image = getUrlParameter("image");
        const price = getUrlParameter("price");
        const year  = getUrlParameter("year");
        const author=getUrlParameter("author");
        const category=getUrlParameter("category");
        const ID=getUrlParameter("ID");
      // Display book details
        const bookInfoDiv = document.getElementById("book-info");
        const info_top=document.createElement("div");
        info_top.classList.add("info_top");
        const h2 = document.createElement("h2");
        h2.textContent = decodeURIComponent(title);
        info_top.appendChild(h2);
        let rs = localStorage.getItem("books");
        let MB = new Map(JSON.parse(rs));
        let img;
        MB.forEach((books, c)=>
        {  
                books.forEach(book=>
                    {
                        if(ID==book.ID)
                        {
                            img=book.image;
                        }
                    })
        })
        let imgDiv=document.createElement("div")
        imgDiv.innerHTML=`
        <img src=${img}>
        `
        imgDiv.id="imgdetails";
        info_top.appendChild(imgDiv);
        bookInfoDiv.appendChild(info_top);
        const info_bottom=document.createElement("div");
        info_bottom.classList.add("info_bottom");
        bookInfoDiv.appendChild(info_bottom);
        const pr=document.createElement("p");
        pr.textContent="Price:  "+ decodeURIComponent(price);
        info_bottom.appendChild(pr); 
        const aut=document.createElement("p");
        aut.textContent="Author:   "+decodeURIComponent(author);
        info_bottom.appendChild(aut);
        const yer=document.createElement("p");
        yer.textContent="Year:   "+decodeURIComponent(year);
        const categ=document.createElement("p");
        categ.textContent="Cateogry:   "+decodeURIComponent(category);
        info_bottom.appendChild(categ);
        info_bottom.appendChild(yer);
        const pre = document.createElement("pre");
        const descTitle = document.createElement("span");
        descTitle.textContent = "Description: ";
        pre.appendChild(descTitle);
        const p = document.createElement("h4");
        p.textContent = decodeURIComponent(description);
        pre.appendChild(p);
        info_bottom.appendChild(pre);
    </script>
    <script src="jss/DisplayBooksStudent.js"></script>
</body>

</html>